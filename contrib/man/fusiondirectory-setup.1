.\" Automatically generated by Pod::Man 4.07 (Pod::Simple 3.32)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.if !\nF .nr F 0
.if \nF>0 \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    if !\nF==2 \{\
.        nr % 0
.        nr F 2
.    \}
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "FUSIONDIRECTORY-SETUP 1"
.TH FUSIONDIRECTORY-SETUP 1 "2018-08-16" "FusionDirectory 1.2.2" "FusionDirectory Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
fusiondirectory\-setup \- FusionDirectory configuration management tool
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This script is designed to perform multiple checks on your FusionDirectory/LDAP architecture, and fix usual misconfiguration.
Some extra features allow you to install FusionDirectory's plugins, and change destinations directories.
.SS "Options"
.IX Subsection "Options"
.IP "\-\-update\-cache" 4
.IX Item "--update-cache"
This option update the /var/cache/fusiondirectory/class.cache file. Which contain \s-1PHP\s0 classes used in FusionDirectory, and their location.
.IP "\-\-update\-locales" 4
.IX Item "--update-locales"
This option update internalization, by generating a new .mo locales file for each language, with every .po files it found.
Needs \fImsgcat\fR and \fImsgfmt\fR to be installed.
.IP "\-\-check\-directories" 4
.IX Item "--check-directories"
This option perform a check on all FusionDirectory's files or directories.
.IP "\-\-check\-config" 4
.IX Item "--check-config"
This option perform a check on FusionDirectory's config file.
.IP "\-\-check\-ldap" 4
.IX Item "--check-ldap"
This option check your \s-1LDAP\s0 tree. Looking for admin account, and groups or people branch. If one of those don't exists, the script will ask you what to do.
.IP "\-\-check\-ids" 4
.IX Item "--check-ids"
This option check your \s-1LDAP\s0 tree for duplicated uidNumber or gidNumber among users and groups.
.IP "\-\-migrate\-users" 4
.IX Item "--migrate-users"
This option add FusionDirectory attributes to the people branch.
.IP "\-\-migrate\-phones" 4
.IX Item "--migrate-phones"
This option removes device objectClass for phones as fdPhones is now structural since \s-1FD 1.1.\s0
.IP "\-\-migrate\-systems" 4
.IX Item "--migrate-systems"
This option replace old systems objectClasses by new objectClasses from \s-1FD 1.1.\s0
.IP "\-\-migrate\-winstations" 4
.IX Item "--migrate-winstations"
This option replace old winstations objectClasses by new objectClasses from \s-1FD 1.1.\s0
.IP "\-\-migrate\-dhcp" 4
.IX Item "--migrate-dhcp"
This option moves \s-1DHCP\s0 configurations from systems branch to \s-1DHCP\s0 branch, which is necessary for FusionDirectory 1.0.17 and above.
.IP "\-\-delete\-gosa\-locks" 4
.IX Item "--delete-gosa-locks"
This option will delete old GOsa style lock tokens from 1.0.15 or older
.IP "\-\-install\-plugins" 4
.IX Item "--install-plugins"
This option will install the plugin from a tar.gz of the plugin. This option is intended for people wanting to install from the sources.
.IP "\-\-encrypt\-passwords" 4
.IX Item "--encrypt-passwords"
This option will encrypt the password inside your fusiondirectory.conf file, it need the headers module to be activated in your apache to work.
.IP "\-\-show\-version" 4
.IX Item "--show-version"
This option will parse the file variables_common.inc of FusionDirectory to find out which version of FusionDirectory is installed.
.IP "\-\-list_vars" 4
.IX Item "--list_vars"
This option will list the variables you can change to install FusionDirectory on another set of directories. This option is intended for people wanting to install from the sources.
.IP "\-\-write\-vars" 4
.IX Item "--write-vars"
This option will write back the variables.inc file with the updated variables and is only useful with \-\-set\-VAR=variable and for people installing from sources.
.IP "\-\-set\-VAR=variable" 4
.IX Item "--set-VAR=variable"
This option will change the variable for the FusionDirectory installation. it is only useful with \-\-install\-directories and for people installing from sources.
.IP "\-\-list\-deprecated" 4
.IX Item "--list-deprecated"
This option will list the deprecated attributes and objectclasses still in your schemas and no longer used by FusionDirectory.
.IP "\-\-check\-deprecated" 4
.IX Item "--check-deprecated"
This option will list the dn of \s-1LDAP\s0 entries using deprecated attributes or objectclasses and no longer used by FusionDirectory.
.IP "\-\-ldif\-deprecated" 4
.IX Item "--ldif-deprecated"
This option will print an \s-1LDIF\s0 to allow you to remove deprecated attributes from you ldap server. Be careful and check before applying.
.IP "\-\-show\-config" 4
.IX Item "--show-config"
This option will print a dump of the FusionDirectory configuration \s-1LDAP\s0 node.
.IP "\-\-set\-config\-VAR=value" 4
.IX Item "--set-config-VAR=value"
This option sets the value of a configuration field in the \s-1LDAP.\s0 The value needs to be in the correct \s-1LDAP\s0 format.
You cannot set multivalued field with this. The var name can be provided with or without the fd prefix.
.IP "\-\-yes" 4
.IX Item "--yes"
This flag will answer \*(L"yes\*(R" to every yes/no question asked by the script
.SH "EXAMPLE"
.IX Header "EXAMPLE"
.Vb 1
\& benoit@catbert$ fusiondirectory\-setup \-\-update\-cache \-\-update\-locales
\&
\& Update FusionDirectory class cache and update localization
\&
\& benoit@catbert$ fusiondirectory\-setup \-\-list\-vars
\& List possible vars to give \-\-set
\&locale_cache_dir        [locale]
\&config_file             [fusiondirectory.conf]
\&fd_cache                [/var/cache/fusiondirectory]
\&fd_smarty_dir           [/usr/share/php/smarty3]
\&fd_spool_dir            [/var/spool/fusiondirectory]
\&fai_log_dir             [fai]
\&tmp_dir                 [tmp]
\&secrets_file            [fusiondirectory.secrets]
\&template_dir            [template]
\&locale_dir              [locale]
\&class_cache             [class.cache]
\&fd_config_dir           [/etc/fusiondirectory]
\&fd_home [/var/www/fusiondirectory]
\&
\&
\& benoit@catbert$ fusiondirectory\-setup \-\-set\-class_cache=class.cache \-\-write\-vars
\&
\& update the class.cache name and write back the variables.inc file
.Ve
.SH "BUGS"
.IX Header "BUGS"
Please report any bugs, or post any suggestions, to the fusiondirectory mailing list fusiondirectory-users or to
<https://gitlab.fusiondirectory.org/fusiondirectory/fd/issues/new>
.SH "AUTHORS"
.IX Header "AUTHORS"
Benjamin Carpentier
.PP
Come Bernigaud
.SH "LICENCE AND COPYRIGHT"
.IX Header "LICENCE AND COPYRIGHT"
This code is part of FusionDirectory (http://www.fusiondirectory.org/)
.IP "Copyright (C) 2011\-2018  FusionDirectory" 2
.IX Item "Copyright (C) 2011-2018 FusionDirectory"
.PP
This program is distributed in the hope that it will be useful,
but \s-1WITHOUT ANY WARRANTY\s0; without even the implied warranty of
\&\s-1MERCHANTABILITY\s0 or \s-1FITNESS FOR A PARTICULAR PURPOSE. \s0 See the
\&\s-1GNU\s0 General Public License for more details.
